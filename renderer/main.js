process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"utils/file.js":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime/helpers/defineProperty"));function n(e){return e&&e.__esModule?e:{default:e}}var r=require("path"),i=require("fs-extra"),t=r.join(__dirname,"../"),o=function(e,n){return new Promise(function(r,t){var o=i.createWriteStream(e);o.on("open",function(){for(var e=Math.ceil(n.length/128),r=0;r<e;r+=1){var i=n.slice(128*r,Math.min(128*(r+1),n.length));o.write(i)}o.end()}),o.on("error",function(e){t(e)}),o.on("finish",function(){r(!0)})})};module.exports=(0,e.default)({root:t,saveFile:o,path:function(e){return r.join(t,e)},exist:function(e){return i.existsSync(r.join(t,e))},del:function(e){var n=r.join(t,e);i.existsSync(n)&&i.unlinkSync(n)},file2JSON:function(e){return JSON.parse(i.readFileSync(r.join(t,e)))},JSON2File:function(e,n){var r=Buffer.from(JSON.stringify(n,null,2),"utf8");o(e,r)}},"saveFile",o);
},{}],"createWindow.js":[function(require,module,exports) {
var e=require("electron"),r=e.BrowserWindow,t=require("electron-window-state"),o=require("url"),a=require("./utils/file"),n={appName:"Altas",version:"0.2.4"},i="darwin"===process.platform,l=function(e){var l=e.entry,c=e.width,s=e.height,d=e.bridge,u=t({defaultWidth:c,defaultHeight:s}),h={x:u.x,y:u.y,width:u.width,height:u.height,center:!0,fullscreenable:!1,transparent:!1,titleBarStyle:"hidden",webPreferences:{nodeIntegration:!0,scrollBounce:!0},frame:!1,icon:a.path("resources/dock.ico"),appIcon:a.path("resources/dock.png")};i?h.vibrancy="titlebar":h.backgroundColor="#fff";var f=new r(h);u.manage(f);var p=o.format({pathname:a.path(l),protocol:"file:",slashes:!0});return f.loadURL(p),f.on("closed",function(){f=null}),d(f,n),f};module.exports=l;
},{"./utils/file":"utils/file.js"}],"utils/readTxtByLine.js":[function(require,module,exports) {
var e=require("fs"),r=require("readline"),n=require("electron-log");module.exports=function(o,t,a){n.debug(o);var i=r.createInterface({input:e.createReadStream(o)}),u=1;i.on("line",function(e){t(u,e),u++}),i.on("close",a)};
},{}],"utils/crypto.js":[function(require,module,exports) {
var e=require("crypto");exports.aseEncode=function(r,t,n){if(16!==t.length||16!==n.length)return"";var a=e.createCipheriv("aes-128-cbc",t,n),c=a.update(r,"utf-8","hex");return c+=a.final("hex")},exports.aseDecode=function(r,t,n){if(16!==t.length||16!==n.length)return"";var a=e.createDecipheriv("aes-128-cbc",t,n),c=a.update(r,"hex","utf-8");return c+=a.final("utf-8")};
},{}],"utils/bridge.js":[function(require,module,exports) {
"use strict";var e=n(require("@babel/runtime/helpers/objectSpread"));function n(e){return e&&e.__esModule?e:{default:e}}var t=require("electron"),o=require("electron-better-dialog"),r=o.showBetterMessageBox,s=require("ip"),i=require("md5"),d=require("electron-dl"),a=t.ipcMain,c=t.clipboard,u=require("./readTxtByLine"),l=require("electron-json-storage"),f=require("./crypto"),p=require("./file"),g=require("os"),m=require("electron-log");module.exports=function(n,t){var o;a.on("get-appdir",function(e,n){e.sender.send("appdir",p.root)}),a.on("write-storage",function(e,n,t){l.set(n,t,function(e){if(e)throw e;m.info(t),m.info("[".concat(n,"]：数据已写入"))})}),a.on("read-storage",function(e,n){l.get(n,function(n,t){e.sender.send("get-storage",t)})}),a.on("remove-storage",function(e,n){l.remove(n),m.info("[".concat(n,"]：数据已删除"))}),a.on("on-dialog-message",function(e,t){r(n,t)}),a.on("ipc-start",function(e,n){e.sender.send("ipc-running",t)}),a.on("read-text",function(e,n){u(n,function(n,t){var o={index:n,line:t,status:"pending"};e.sender.send("get-text-line",o)},function(){e.sender.send("get-text-line",{status:"done"})})}),a.on("file-download",function(t,r,s){var i,a=function(){var e=s.timeout;e&&(i=setTimeout(function(){o&&(o.cancel(),m.error(r+"[下载超时，已取消]"))},e))};d.download(n,r,(0,e.default)({onStarted:function(e){o=e,a(),n.webContents.send("on-download-state",{status:"start",progress:0,index:s.index||0})},onCancel:function(e){i&&clearTimeout(i),n.webContents.send("on-download-state",{status:"cancel",progress:0,index:s.index||0})},onProgress:function(e){i&&clearTimeout(i),a(),n.webContents.send("on-download-state",{status:"running",progress:e,index:s.index||0})}},s)).then(function(e){i&&clearTimeout(i),m.debug(e.getSavePath()),n.webContents.send("on-download-state",{status:"finished",progress:1,index:s.index||0})}).catch(function(){i&&clearTimeout(i),n.webContents.send("on-download-state",{status:"error",progress:0,index:s.index||0})})}),a.on("file-download-cancel",function(e,n){o&&o.cancel()}),a.on("read-clipboard",function(e,n){e.sender.send("get-clipboard-text",c.readText())}),a.on("write-clipboard",function(e,n){c.writeText(n)}),a.on("get-ip-address",function(e,n){var t={};t.ip=s.address(),e.sender.send("ip-address",t)}),a.on("get-device-os",function(e,n){var t={arch:g.arch(),cpu:g.cpus(),release:g.release(),homedir:g.homedir(),tmpdir:g.tmpdir(),type:g.type(),uptime:g.uptime(),userInfo:g.userInfo(),memory:g.totalmem(),hostname:g.hostname(),network:g.networkInterfaces(),platform:g.platform()};e.sender.send("device-os",t)}),a.on("aes-encode",function(e,n){var t=i(n.pswd),o=t.slice(0,16),r=t.slice(16);e.sender.send("get-aes-encode",f.aseEncode(n.data,o,r))}),a.on("aes-decode",function(e,n){var t=i(n.pswd),o=t.slice(0,16),r=t.slice(16);e.sender.send("get-aes-decode",f.aseDecode(n.data,o,r))})};
},{"./readTxtByLine":"utils/readTxtByLine.js","./crypto":"utils/crypto.js","./file":"utils/file.js"}],"utils/tray.js":[function(require,module,exports) {
var e=require("electron"),n=e.app,t=e.Menu,o=e.Tray,r=e.shell,c=e.ipcMain,i=require("./file"),l="win32"===process.platform;module.exports=function(e){var c=l?i.path("resources/dock.ico"):i.path("resources/icon.png"),s=new o(c),a=t.buildFromTemplate([{click:function(){e.webContents.send("history-push","/sync"),e.show(),e.focus()},label:"设置"},{type:"separator"},{click:function(){r.openExternal("https://github.com/halo-design/Altas")},label:"关于"},{click:function(){n.quit()},label:"退出"}]);return s.setContextMenu(a),s};
},{"./file":"utils/file.js"}],"main.js":[function(require,module,exports) {
var e,i,t=require("electron"),n=t.app,r=t.ipcMain,o=require("./createWindow"),l=require("path"),u=require("./utils/bridge"),c=require("./utils/tray"),a=!1,s=function(){e=o({entry:"renderer/index.html",width:980,height:620,bridge:u}),(i=c(e)).setToolTip("Altas"),r.on("set-tray-title",function(e,t){i.setTitle(t)}),i.on("click",function(){e.isVisible()?e.hide():e.show()}),e.on("close",function(t){a?(i.destroy(),e=null,i=null,n.quit()):(t.preventDefault(),e.hide())}),e.hide()};n.on("ready",s),n.on("before-quit",function(){a=!0}),n.on("window-all-closed",function(){"darwin"!==process.platform&&n.quit()}),n.on("activate",function(){null===e?s():e.show()});
},{"./createWindow":"createWindow.js","./utils/bridge":"utils/bridge.js","./utils/tray":"utils/tray.js"}]},{},["main.js"], null)
process.env.HMR_PORT=0;process.env.HMR_HOSTNAME="localhost";parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"utils/file.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("fs-extra")),r=t(require("path"));function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var n=r.join(__dirname,"../"),i=function(r,t){return new Promise(function(n,i){var o=e.createWriteStream(r);o.on("open",function(){for(var e=Math.ceil(t.length/128),r=0;r<e;r+=1){var n=t.slice(128*r,Math.min(128*(r+1),t.length));o.write(n)}o.end()}),o.on("error",function(e){i(e)}),o.on("finish",function(){n(!0)})})},o={JSON2File:function(e,r){var t=Buffer.from(JSON.stringify(r,null,2),"utf8");i(e,t)},del:function(t){var i=r.join(n,t);e.existsSync(i)&&e.unlinkSync(i)},exist:function(t){return e.existsSync(r.join(n,t))},file2JSON:function(t){return JSON.parse(e.readFileSync(r.join(n,t),"utf-8"))},path:function(e){return r.join(n,e)},root:n,saveFile:i};exports.default=o;
},{}],"core/winStateKeeper.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("electron-window-state"),t=function(t,i){var r=i.width,d=i.height,o=e({defaultHeight:d,defaultWidth:r});return t.setSize(o.width,o.height),t.setPosition(o.x,o.y),o.manage(t),t},i=t;exports.default=i;
},{}],"core/winCreate.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("electron"),r=n(require("url")),t=a(require("../utils/file")),o=a(require("./winStateKeeper"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var i=function(a,n){var i={appIcon:t.default.path("resources/dock.png"),center:!0,frame:!1,fullscreenable:!1,icon:t.default.path("resources/dock.ico"),titleBarStyle:"hidden",transparent:!1,webPreferences:{nodeIntegration:!0,scrollBounce:!0},resizable:!1};"darwin"===process.platform?i.vibrancy="appearance-based":i.backgroundColor="#fff",Object.assign(i,a);var l=(0,o.default)(new e.BrowserWindow(i),{width:a.width,height:a.height}),c=r.format({pathname:t.default.path(n),protocol:"file:",slashes:!0});return l.loadURL(c),l},l=i;exports.default=l;
},{"../utils/file":"utils/file.ts","./winStateKeeper":"core/winStateKeeper.ts"}],"core/rpc.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/classCallCheck")),t=c(require("@babel/runtime/helpers/createClass")),i=c(require("@babel/runtime/helpers/possibleConstructorReturn")),r=c(require("@babel/runtime/helpers/assertThisInitialized")),n=c(require("@babel/runtime/helpers/getPrototypeOf")),s=c(require("@babel/runtime/helpers/get")),u=c(require("@babel/runtime/helpers/inherits")),l=require("events"),a=require("electron"),d=o(require("uuid"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};r.get||r.set?Object.defineProperty(t,i,r):t[i]=e[i]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var f=function(l){function o(t){var s;if((0,e.default)(this,o),(s=(0,i.default)(this,(0,n.default)(o).call(this))).win=null,s.destroyed=!1,s.id="",s.win=t,s.ipcListener=s.ipcListener.bind((0,r.default)(s)),s.dispatch=s.dispatch.bind((0,r.default)(s)),s.destroy=s.destroy.bind((0,r.default)(s)),s.destroyed)return(0,i.default)(s);var u=d.v4();return s.id=u,a.ipcMain.on(u,s.ipcListener),s.wc&&s.wc.on("did-finish-load",function(){s.wc&&s.wc.send("init",u)}),s}return(0,u.default)(o,l),(0,t.default)(o,[{key:"ipcListener",value:function(e,t){var i=t.ev,r=t.data;(0,s.default)((0,n.default)(o.prototype),"emit",this).call(this,i,r)}},{key:"dispatch",value:function(e,t){this.win&&!this.win.isDestroyed()&&this.wc&&this.wc.send(this.id,{ch:e,data:t})}},{key:"destroy",value:function(){this.removeAllListeners(),this.wc&&this.wc.removeAllListeners(),this.id?a.ipcMain.removeListener(this.id,this.ipcListener):this.destroyed=!0}},{key:"wc",get:function(){return this.win?this.win.webContents:null}}]),o}(l.EventEmitter),h=function(e){return new f(e)};exports.default=h;
},{}],"utils/readTxtByLine.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("electron-log")),r=o(require("fs")),t=o(require("readline"));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}function n(e){return e&&e.__esModule?e:{default:e}}var u=function(o,n,u){e.default.debug(o);var i=t.createInterface({input:r.createReadStream(o)}),a=1;i.on("line",function(e){n(a,e),a++}),i.on("close",u)};exports.default=u;
},{}],"utils/crypto.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.aseDecode=exports.aseEncode=void 0;var e=r(require("crypto"));function r(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var t=function(r,t,n){if(16!==t.length||16!==n.length)return"";var o=e.createCipheriv("aes-128-cbc",t,n),c=o.update(r,"utf8","hex");return c+=o.final("hex")};exports.aseEncode=t;var n=function(r,t,n){if(16!==t.length||16!==n.length)return"";var o=e.createDecipheriv("aes-128-cbc",t,n),c=o.update(r,"hex","utf8");return c+=o.final("utf-8")};exports.aseDecode=n;
},{}],"utils/terminal.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spawnKill=exports.spawn=void 0;var e=require("os"),r=require("node-pty").spawn,s="win32"===e.platform()?"powershell.exe":"bash";"darwin"===process.platform&&(process.env.PATH=process.env.PATH+":/usr/local/bin");var o=function(){return r(s,[],{name:"xterm-color",cols:60,rows:32,cwd:process.env.PWD,env:process.env})},n=o(),p=!0,t=!1,l=function(e,r){t&&(n=o(),t=!1,p=!0),n.write(e),p&&(n.on("data",function(e){r(e)}),p=!1)};exports.spawn=l;var a=function(){n.kill(),n=null,t=!0};exports.spawnKill=a;
},{}],"utils/tray.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("electron"),t=r(require("./file"));function r(e){return e&&e.__esModule?e:{default:e}}var o="win32"===process.platform,l=function(r){var l=o?t.default.path("resources/dock.ico"):t.default.path("resources/icon.png"),n=new e.Tray(l),u=e.Menu.buildFromTemplate([{click:function(){r.dispatch("history-push","/sync"),r.win.show(),r.win.focus()},label:"设置"},{type:"separator"},{click:function(){e.shell.openExternal("https://github.com/halo-design/Altas")},label:"关于"},{click:function(){e.app.quit()},label:"退出"}]);return n.setContextMenu(u),n};exports.default=l;
},{"./file":"utils/file.ts"}],"core/bridge.ts":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("electron"),t=g(require("../utils/file")),n=g(require("../utils/readTxtByLine")),o=g(require("electron-log")),r=p(require("electron-json-storage")),i=p(require("ip")),a=p(require("os")),s=p(require("object-hash")),u=p(require("../utils/crypto")),c=require("../utils/terminal"),d=g(require("../utils/tray")),l=require("electron-better-dialog"),f=g(require("electron-dl"));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var w=function(p){var g,w=p.dispatch,m=p.win,x=null;return m&&((x=(0,d.default)(p)).setToolTip("Altas"),p.on("set-tray-title",function(e){x.setTitle(e)}),x.on("click",function(){m.isVisible()?m.hide():m.show()})),p.on("get-appdir",function(){w("appdir",t.default.root)}),p.on("write-storage",function(e){var t=e.key,n=e.data;r.set(t,n,function(e){if(e)throw e;o.default.info(n),o.default.info("[".concat(t,"]：数据已写入"))})}),p.on("read-storage",function(e){r.get(e,function(e,t){w("get-storage",t)})}),p.on("remove-storage",function(e){r.remove(e,function(e){o.default.error(e)}),o.default.info("[".concat(e,"]：数据已删除"))}),p.on("on-dialog-message",function(e){m&&(0,l.showBetterMessageBox)(m,e)}),p.on("read-text",function(e){(0,n.default)(e,function(e,t){w("get-text-line",{index:e,line:t,status:"pending"})},function(){w("get-text-line",{status:"done"})})}),p.on("file-download",function(e){var t,n=e.url,r=e.args,i=function(){var e=r.timeout;e&&(t=setTimeout(function(){g&&(g.cancel(),o.default.error(n+"[下载超时，已取消]"))},e))};m&&f.default.download(m,n,Object.assign({onCancel:function(){t&&clearTimeout(t),w("on-download-state",{index:r.index||0,progress:0,status:"cancel"})},onProgress:function(e){t&&clearTimeout(t),i(),w("on-download-state",{index:r.index||0,progress:e,status:"running"})},onStarted:function(e){g=e,i(),w("on-download-state",{index:r.index||0,progress:0,status:"start"})}},r)).then(function(e){t&&clearTimeout(t),o.default.debug(e.getSavePath()),w("on-download-state",{index:r.index||0,progress:1,status:"finished"})}).catch(function(){t&&clearTimeout(t),w("on-download-state",{index:r.index||0,progress:0,status:"error"})})}),p.on("file-download-cancel",function(){g&&g.cancel()}),p.on("read-clipboard",function(){w("get-clipboard-text",e.clipboard.readText())}),p.on("write-clipboard",function(t){e.clipboard.writeText(t)}),p.on("get-ip-address",function(){var e={ip:""};e.ip=i.address(),w("ip-address",e)}),p.on("get-device-os",function(){var e={arch:a.arch(),cpu:a.cpus(),homedir:a.homedir(),hostname:a.hostname(),memory:a.totalmem(),network:a.networkInterfaces(),platform:a.platform(),release:a.release(),tmpdir:a.tmpdir(),type:a.type(),uptime:a.uptime(),userInfo:a.userInfo()};w("device-os",e)}),p.on("aes-encode",function(e){var t=s.MD5(e.pswd),n=t.slice(0,16),o=t.slice(16);w("get-aes-encode",u.aseEncode(e.data,n,o))}),p.on("aes-decode",function(e){var t=s.MD5(e.pswd),n=t.slice(0,16),o=t.slice(16);w("get-aes-decode",u.aseDecode(e.data,n,o))}),p.on("spawn",function(e){(0,c.spawn)(e,function(e){w("stdout",e)})}),p.on("spawn-kill",function(){(0,c.spawnKill)()}),{tray:x}};exports.default=w;
},{"../utils/file":"utils/file.ts","../utils/readTxtByLine":"utils/readTxtByLine.ts","../utils/crypto":"utils/crypto.ts","../utils/terminal":"utils/terminal.ts","../utils/tray":"utils/tray.ts"}],"main.ts":[function(require,module,exports) {
"use strict";var e,r=require("electron"),t=o(require("./core/winCreate")),n=o(require("./core/rpc")),i=o(require("./core/bridge"));function o(e){return e&&e.__esModule?e:{default:e}}var u=!1,a=function(){e=(0,t.default)({height:620,width:980},"renderer/index.html");var o=(0,n.default)(e),a=(0,i.default)(o).tray;e.on("close",function(t){u?(a.destroy(),e=null,r.app.quit()):(t.preventDefault(),e.hide())}),e.hide()};r.app.on("ready",a),r.app.on("before-quit",function(){u=!0}),r.app.on("window-all-closed",function(){"darwin"!==process.platform&&r.app.quit()}),r.app.on("activate",function(){null===e?a():e.show()});
},{"./core/winCreate":"core/winCreate.ts","./core/rpc":"core/rpc.ts","./core/bridge":"core/bridge.ts"}]},{},["main.ts"], null)